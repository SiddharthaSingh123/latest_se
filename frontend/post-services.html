<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home2Hope | Post Services</title>
    <!-- Bootstrap CDN -->
    <link rel="icon" type="image/x-icon" href="./images/favicon/favicon.ico">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png" />
    <link rel="manifest" href="images/favicon/site.webmanifest" />
    <!-- Styles -->
    <link rel="stylesheet" href="./styles/sellProducts.css" />

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>

    <script>
        function purple(event) {
            event.target.style.borderColor = "#961e47";
            event.target.style.borderWidth = "2px";
        }
    </script>
</head>

<body >
   
    <div id="sos"></div>
    <div id="main-page">
        <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-light">
  <a class="navbar-brand" href="index.html">
    <img src="images/Home2Hope-logo.png" alt="Home2Hope-logo" style="height:60px; width:100px;">
  </a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <!-- CENTERED menu -->
    <ul class="navbar-nav mx-auto text-center">
      <li class="nav-item dropdown" style="padding-left: 30px; padding-right: 30px;">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownProducts" role="button"
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: #961e47;">
          PRODUCTS
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownProducts">
          <a class="dropdown-item" href="buy-products.html">Buy Products</a>
          <a class="dropdown-item" href="sell-products.html">Sell Products</a>
        </div>
      </li>

      <li class="nav-item dropdown" style="padding-left: 30px; padding-right: 30px;">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownServices" role="button"
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: #961e47;">
          SERVICES
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownServices">
          <a class="dropdown-item" href="post-services.html">Post Services</a>
        </div>
      </li>

      <li class="nav-item" style="padding-left: 30px; padding-right: 30px;">
        <a class="nav-link" href="ask-desk.html" style="color: #961e47;">ASK DESK</a>
      </li>

      <li class="nav-item" style="padding-left: 30px; padding-right: 30px;">
        <a class="nav-link" href="news.html" style="color: #961e47;">WOMEN IN NEWS</a>
      </li>

      <li class="nav-item" style="padding-left: 30px; padding-right: 30px;">
        <a class="nav-link" href="fight-crimes.html" style="color: #961e47;">
          REPORT CRIME <span class="badge badge-secondary" style="margin-left: 6px;">New</span>
        </a>
      </li>
    </ul>

    <!-- RIGHT side: auth / user area (app.js toggles visibility) -->
    <ul class="navbar-nav">
      <!-- shown when not logged in (app.js will hide/show these) -->
      <li class="nav-item" id="navSignup" style="padding-right: 10px;">
        <a class="nav-link" href="signup.html" style="color: #961e47;"><i class="fas fa-user-plus"></i> Signup</a>
      </li>

      <li class="nav-item" id="navLogin" style="padding-right: 20px;">
        <a class="nav-link" href="login.html" style="color: #961e47;"><i class="fas fa-sign-in-alt"></i> Login</a>
      </li>

      <!-- user dropdown when logged in (hidden by default; app.js will show it) -->
      <li class="nav-item dropdown" id="navUser" style="display:none;">
        <a class="nav-link dropdown-toggle" href="#" id="navUserDropdown" role="button" data-toggle="dropdown"
           aria-haspopup="true" aria-expanded="false" style="color: #961e47;">
          <span id="navUsername">User</span>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navUserDropdown">
          <a class="dropdown-item" href="profile.html">Profile</a>
          <a class="dropdown-item" href="#" id="navLogout">Logout</a>
        </div>
      </li>
    </ul>
  </div>
</nav>



        <!-- End of Navbar -->

        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

        <script>
            // Your web app's Firebase configuration
            //env variables

            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);

            // Get a reference to the database service
            var database = firebase.database();
        </script>

<div class="container-fluid">
    <div class="row" style="padding-top: 5px; display: flex; justify-content: center;">
        <div class="col-12 col-lg-12 order-lg-7" style="display: flex; flex-direction: column; align-items: center;">
          
            <div class="col-5" style="text-align: center;">
                <h2 style="color: #961e47">Post Services</h2>
                <h5 style="padding-top: 10px">
                    Post services which you wish to provide
                </h5>
            </div>
            <div class="row" >
                <!-- Name -->
                <div class="col-6">
                    <label id="labelName" for="name">Service Name<sup>*</sup></label>
                    <input type="text" onfocus="purple(event)" id="prodName" name="" style="width: 100%"
                        title="Service name" />
                </div>
                <!-- Category -->
                <div class="col-6">
                    <div class="dropdown" style="padding-top: 21px">
                        <select class="form-control category-btn" id="categoryList">
                            <option value="none" selected disabled hidden>
                                Your category*
                            </option>
                            <option>Cooking Service</option>
                            <option>Salon/Hairdressing</option>
                            <option>Tiffin Service</option>
                            <option>Stiching/Ironing/Washing Clothes</option>
                            <option>Repairing Items</option>
                            <option>Other</option>
                        </select>
                    </div>
                </div>
                <!-- Description -->
                <div class="col-12">
                    <label id="labelDesc" for="description">Service Description<sup>*</sup></label>
                    <textarea id="prodDesc" onfocus="purple(event)" id="prodDesc" style="width: 100%; min-height: 100px"
                        title="Service description"></textarea>

                </div>
                <!-- Price -->
                <div class="col-6">
                    <label id="labelPrice" for="price">Service Price<sup>*</sup></label>
                    <input type="number" onfocus="purple(event)" id="prodPrice" name="" style="width: 100%"
                        title="Service price" />
                </div>
                <!-- Negotiable price -->
                <div class="col-6">
                    <div class="row">
                        <div class="col-6">
                            <h6 style="margin-top: 45px; font-weight: 400; text-align: end;">
                                Price Negotiable
                            </h6>
                            <!-- <label for="name">Price Negotiable<sup>*</sup></label> -->
                        </div>
                        <div class="col-6">
                            <label class="switch">
                                <input type="checkbox" id="prodNeg" value="false" />
                                <div class="slider round"></div>
                            </label>
                           
                        </div>
                       
                    </div>
                     <div class="row" style="margin: 2px; padding: 5px;" >
                            <input class="btn" type="submit" value="Submit" id="submit-btn" style="color:white; ;" onclick="submitProduct()" />
                        </div>
                </div>
                        
                    </form>

            <script>
                // Define the Firebase configuration
                var firebaseConfig = {
                    apiKey: "AIzaSyD1ZXf5jC_AZZJ-oCvX9VWc-Dg1aF_Jz1o",
                authDomain: "pragati-web-app.firebaseapp.com",
                databaseURL: "https://pragati-88314-default-rtdb.firebaseio.com",
                projectId: "pragati-web-app",
                storageBucket: "pragati-web-app.appspot.com",
                messagingSenderId: "1072948419095",
                appId: "1:1072948419095:web:d02d9b70d4873568170515",
                measurementId: "G-8K6QW4YXMX"
                };
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);
                var database = firebase.database();

                function submitProduct() {
                    event.preventDefault();
                    var name = document.getElementById('prodName').value;
                    var category = document.getElementById('categoryList').value;
                    var description = document.getElementById('prodDesc').value;
                    var price = document.getElementById('prodPrice').value;
                    var negotiable = document.getElementById('prodNeg').checked;

                    database.ref('services').push().set({
                        name: name,
                        category: category,
                        description: description,
                        price: price,
                        negotiable: negotiable
                    }).then(function() {
                        alert("service added successfully!");
                        location.reload();
                    }).catch(function(error) {
                        console.error(error);
                        alert("Error adding service: " + error.message);
                    });
                }
               
  (async function(){
    // helper
    const $ = id => document.getElementById(id);
    try {
      const res = await fetch('/api/user', { credentials: 'include' });
      const body = await res.json().catch(()=>null);
      console.log('AUTH CHECK (buy-products):', res.status, body);

      // if authenticated -> show navUser and hide signup/login
      if (body && body.authenticated) {
        const username = (body.user && (body.user.username || body.user.email)) || 'User';

        if ($('navSignup')) $('navSignup').style.display = 'none';
        if ($('navLogin'))  $('navLogin').style.display = 'none';

        if ($('navUser')) {
          $('navUser').style.display = ''; // show
          const nameEl = $('navUsername');
          if (nameEl) nameEl.innerText = username;
        }

        // ensure logout link works (some pages may not wire it)
        const logoutLink = document.querySelector('#navUser .dropdown-menu a[href="#"], #navLogout, a#navLogout');
        if (logoutLink) {
          logoutLink.addEventListener('click', async (e) => {
            e.preventDefault();
            try {
              await fetch('/api/logout', { method: 'POST', credentials: 'include' });
            } catch(err) { console.error('logout request failed', err); }
            window.location.reload();
          });
        }
      } else {
        // not authenticated -> show signup/login, hide user dropdown
        if ($('navSignup')) $('navSignup').style.display = '';
        if ($('navLogin'))  $('navLogin').style.display = '';
        if ($('navUser'))   $('navUser').style.display = 'none';
      }
    } catch (err) {
      console.error('Auth check error', err);
      if ($('navSignup')) $('navSignup').style.display = '';
      if ($('navLogin'))  $('navLogin').style.display = '';
      if ($('navUser'))   $('navUser').style.display = 'none';
    }
  })();
</script>

            </script>
    <!-- Footer -->
    <footer>
        <div class="col-12" style="padding: 30px 0px; font-weight: bolder;">
            &copy; Home2Hope 2025 | 405Found
            <a href="index.html" style="text-decoration: none;">About Us</a>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="./js/post-services.js"></script>
    <script src="./js/sos.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

</body>

</html>
